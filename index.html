<!DOCTYPE html>
<html lang="zh-CN">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Jing -Jing's EachEvent</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #222;
      color: #ddd;
      padding: 20px;
      text-align: center;
    }

    .container {
      max-width: 300px;
      margin: 20px auto 0;
      display: flex;
      flex-direction: column;
      /* æ”¹ä¸ºåˆ—å¸ƒå±€ä»¥å®ç°ä¸Šä¸‹æ’åˆ— */
      align-items: center;
      /* å±…ä¸­å¯¹é½ */
    }

    .ee {
      background-color: #333;
      border-radius: 8px;
      box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
      padding: 20px;
      text-align: left;
      transition: transform 0.2s ease, box-shadow 0.2s ease;
      width: 100%;
      /* è®©æ¯ä¸ª.eeå…ƒç´ å æ®å®¹å™¨å®½åº¦ */
      margin-bottom: 20px;
      /* åœ¨æ¯ä¸ª.eeå…ƒç´ é—´å¢åŠ é—´è· */
    }

    .ee-title {
      font-size: 20px;
      font-weight: bold;
      margin-bottom: 10px;
      color: #b61372;
    }


    .ee-days,
    .ee-next-date {
      font-size: 16px;
      color: #666;
      margin-bottom: 10px;
    }

    .days-left {
      color: #66ff99;
    }

    .days-passed {
      color: #ff6699;
    }

    .days-comming {
      color: #055b83;
    }

    @media (max-width: 600px) {
      .ee {
        padding: 10px;
        /* å‡å°‘å°å±è®¾å¤‡ä¸Šçš„å†…è¾¹è· */
        font-size: 14px;
        /* å­—ä½“å¤§å°é€‚åº”å°å± */
      }

      .ee-title {
        font-size: 18px;
        /* è°ƒæ•´æ ‡é¢˜åœ¨å°å±ä¸‹çš„å¤§å° */
      }
    }
  </style>

</head>

<body>
  <div class="container" id="anniversaries">
    <!-- åŠ¨æ€æ’å…¥æ¨¡å—åˆ—è¡¨ -->
  </div>

  <script>
    function calculateDaysToNextSameDate(dateString) {
      // è§£æä¼ å…¥çš„æ—¥æœŸå­—ç¬¦ä¸²  
      const inputDate = new Date(dateString);
      if (isNaN(inputDate.getTime())) {
        throw new Error('Invalid date string');
      }
      // è·å–å½“å‰æ—¥æœŸçš„æœˆä»½å’Œæ—¥æœŸ  
      const currentMonth = inputDate.getMonth();
      const currentDate = inputDate.getDate();
      // åˆ›å»ºä¸€ä¸ªæ–°çš„Dateå¯¹è±¡è¡¨ç¤ºå½“å‰æ—¥æœŸ  
      const now = new Date();
      // å¦‚æœå½“å‰æœˆä»½å¤§äºç›®æ ‡æœˆä»½æˆ–æœˆä»½ç›¸åŒä½†æ—¥æœŸå¤§äºç›®æ ‡æ—¥æœŸï¼Œåˆ™è®¾ç½®ç›®æ ‡æ—¥æœŸä¸ºæ˜å¹´çš„åŒä¸€å¤©  
      if (now.getMonth() > currentMonth || (now.getMonth() === currentMonth && now.getDate() > currentDate)) {
        inputDate.setFullYear(now.getFullYear() + 1);
      } else {
        // å¦åˆ™ï¼Œå°±æ˜¯ä»Šå¤©
        inputDate.setFullYear(now.getFullYear());
      }
      // ç¡®ä¿æ—¥æœŸåœ¨æ­£ç¡®çš„æœˆä»½ï¼Œå› ä¸ºsetMonth()æ–¹æ³•å¯èƒ½ä¼šå¯¼è‡´æ—¥æœŸå˜åŒ–ï¼ˆå¦‚æœè®¾ç½®çš„æ—¥æœŸåœ¨å½“å‰æœˆä¸å­˜åœ¨ï¼‰  
      inputDate.setMonth(currentMonth, currentDate);
      // è®¡ç®—ä¸¤ä¸ªæ—¥æœŸä¹‹é—´çš„æ¯«ç§’å·®  
      const diff = inputDate - now;
      // è½¬æ¢ä¸ºå¤©æ•°  
      const daysDiff = Math.ceil(diff / (1000 * 60 * 60 * 24));
      return daysDiff;
    }


    const anniversaries = [
      { date: "2017-10-27", title: "ç‰µæ‰‹" },
      { date: "2017-11-13", title: "Kiss" },
      { date: "2017-12-19", title: "ç”œèœœæ—¥" },
      { date: "2018-01-01", title: "åœ¨ä¸€èµ·" },
      { date: "2021-06-13", title: "æ­å·åŒå±…" },
      { date: "2021-06-15", title: "çˆ±å¿ƒåˆé¤ï¼ˆæ²¹éº¦èœ&ç•ªèŒ„ç‚’è›‹ï¼‰" },
      { date: "2023-08-12", title: "å¼€å§‹å¼‚åœ°" },
      { date: "2024-07-11", title: "ç»“æŸå¼‚åœ°" },
      { date: "2024-09-03", title: "é™ä¸ºæˆ‘ä¹°äº†ä¸€è¾†å…¬è·¯è½¦" },
      { date: "2024-10-03", title: "åŒæ–¹çˆ¶æ¯ç¬¬ä¸€æ¬¡è§é¢" },
    ];

    const anniversariesContainer = document.getElementById("anniversaries");
    anniversaries.forEach(ee => {
      const eeElement = document.createElement("div");
      eeElement.classList.add("ee");

      const titleElement = document.createElement("div");
      titleElement.classList.add("ee-title");
      titleElement.textContent = ee.title;

      const daysElement = document.createElement("div");
      daysElement.classList.add("ee-days");

      const nexteeDateElement = document.createElement("div");
      daysElement.classList.add("ee-next-date");

      const today = new Date();
      const eeDate = new Date(ee.date);
      const diffInDays = Math.ceil((eeDate - today) / (1000 * 60 * 60 * 24));

      // è·ç¦»ä¸‹ä¸€æ¬¡çš„æ—¥æœŸ
      const nextDateDays = calculateDaysToNextSameDate(eeDate);
      if (nextDateDays == 0) {
        nexteeDateElement.textContent = `ä»Šå¤©å°±æ˜¯ ${ee.title} çºªå¿µæ—¥ï¼Œä¸€èµ·åº†ç¥å§ï¼ğŸ‡`;
        nexteeDateElement.classList.add("days-comming");
      } else {
        nexteeDateElement.textContent = `è¿˜æœ‰ ${nextDateDays} å¤©`;
        nexteeDateElement.classList.add("days-comming");
      }


      if (diffInDays > 0) {
        daysElement.textContent = `è¿˜æœ‰ ${diffInDays} å¤©`;
        daysElement.classList.add("days-left");
      } else {
        daysElement.textContent = `å·²ç»è¿‡å» ${Math.abs(diffInDays)} å¤©`;
        daysElement.classList.add("days-passed");
      }

      eeElement.appendChild(titleElement);
      eeElement.appendChild(daysElement);
      eeElement.appendChild(nexteeDateElement); // æ·»åŠ æ–°å…ƒç´ åˆ°DOM

      anniversariesContainer.appendChild(eeElement);
    });
  </script>
</body>

</html>
